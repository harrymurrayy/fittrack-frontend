module.exports=[7783,a=>{"use strict";var b=a.i(1807),c=a.i(59376),d=a.i(99442),e=a.i(72698);function f({onPhotoUploaded:a}){let[d,f]=(0,c.useState)(null),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(""),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(new Date().toISOString().split("T")[0]),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1),v=(0,c.useRef)(null),w=a=>{if(a){if(!a.type.startsWith("image/"))return void alert("Please select an image file");if(a.size>5242880)return void alert("File size must be less than 5MB");f(a);let b=new FileReader;b.onloadend=()=>{k(b.result)},b.readAsDataURL(a)}},x=a=>{a.preventDefault(),a.stopPropagation(),"dragenter"===a.type||"dragover"===a.type?u(!0):"dragleave"===a.type&&u(!1)},y=async b=>{if(b.preventDefault(),!d)return void alert("Please select a photo");try{s(!0);let b={file:d,weight:l?parseFloat(l):void 0,notes:n,takenAt:p};await e.api.uploadPhoto(b),f(null),k(null),m(""),o(""),q(new Date().toISOString().split("T")[0]),a()}catch(a){console.error("Upload failed:",a),alert("Failed to upload photo")}finally{s(!1)}};return(0,b.jsxs)("form",{onSubmit:y,className:"card overflow-hidden",children:[(0,b.jsx)("div",{className:"p-6 border-b border-[var(--border-subtle)]",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-[var(--accent-muted)] flex items-center justify-center",children:(0,b.jsx)(g,{className:"w-5 h-5 text-[var(--accent)]"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"text-xl font-semibold text-[var(--text-primary)]",children:"Upload Photo"}),(0,b.jsx)("p",{className:"text-sm text-[var(--text-muted)]",children:"Add a new progress photo to your collection"})]})]})}),(0,b.jsxs)("div",{className:"p-6 space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"Photo"}),j?(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("img",{src:j,alt:"Preview",className:"w-full max-h-[400px] object-contain rounded-xl border border-[var(--border-subtle)]"}),(0,b.jsx)("button",{type:"button",onClick:()=>{f(null),k(null),v.current&&(v.current.value="")},className:"absolute top-3 right-3 w-8 h-8 rounded-lg bg-[var(--bg-primary)]/80 backdrop-blur flex items-center justify-center text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-[var(--bg-primary)] transition-colors",children:(0,b.jsx)(i,{className:"w-5 h-5"})}),(0,b.jsx)("div",{className:"absolute bottom-3 left-3 px-3 py-1.5 rounded-lg bg-[var(--bg-primary)]/80 backdrop-blur",children:(0,b.jsx)("p",{className:"text-sm text-[var(--text-secondary)]",children:d?.name})})]}):(0,b.jsxs)("div",{className:`relative border-2 border-dashed rounded-xl p-8 text-center transition-colors ${t?"border-[var(--accent)] bg-[var(--accent-muted)]":"border-[var(--border-default)] hover:border-[var(--border-hover)]"}`,onDragEnter:x,onDragLeave:x,onDragOver:x,onDrop:a=>{a.preventDefault(),a.stopPropagation(),u(!1),a.dataTransfer.files&&a.dataTransfer.files[0]&&w(a.dataTransfer.files[0])},children:[(0,b.jsx)("input",{ref:v,type:"file",accept:"image/*",onChange:a=>w(a.target.files?.[0]||null),className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),(0,b.jsx)("div",{className:"w-14 h-14 rounded-2xl bg-[var(--bg-tertiary)] flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(h,{className:"w-7 h-7 text-[var(--text-muted)]"})}),(0,b.jsxs)("p",{className:"text-[var(--text-primary)] font-medium mb-1",children:["Drop your image here, or"," ",(0,b.jsx)("span",{className:"text-[var(--accent)]",children:"browse"})]}),(0,b.jsx)("p",{className:"text-sm text-[var(--text-muted)]",children:"PNG, JPG, JPEG up to 5MB"})]})]}),(0,b.jsxs)("div",{className:"grid sm:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"Date Taken"}),(0,b.jsx)("input",{type:"date",value:p,onChange:a=>q(a.target.value),className:"input",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"Weight (kg) — Optional"}),(0,b.jsx)("input",{type:"number",step:"0.1",value:l,onChange:a=>m(a.target.value),placeholder:"75.5",className:"input"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"label",children:"Notes — Optional"}),(0,b.jsx)("textarea",{value:n,onChange:a=>o(a.target.value),placeholder:"Add notes about your progress...",rows:3,className:"textarea"})]})]}),(0,b.jsx)("div",{className:"p-6 border-t border-[var(--border-subtle)] bg-[var(--bg-secondary)]",children:(0,b.jsx)("button",{type:"submit",disabled:!d||r,className:"btn btn-primary w-full sm:w-auto",children:r?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"spinner spinner-sm"}),"Uploading..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(g,{className:"w-4 h-4"}),"Upload Photo"]})})})]})}function g({className:a}){return(0,b.jsx)("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})})}function h({className:a}){return(0,b.jsx)("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}function i({className:a}){return(0,b.jsx)("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}function j({photos:a,onPhotoDeleted:d}){let[e,f]=(0,c.useState)(null),[g,h]=(0,c.useState)(!1),i=a=>new Date(a).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}),j=async a=>{if(confirm("Are you sure you want to delete this photo?"))try{h(!0),alert("Delete functionality coming soon!"),d()}catch(a){console.error("Failed to delete photo:",a),alert("Failed to delete photo")}finally{h(!1)}},n=[...a].sort((a,b)=>new Date(b.takenAt).getTime()-new Date(a.takenAt).getTime());return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 stagger-children",children:n.map(a=>(0,b.jsxs)("button",{onClick:()=>f(a),className:"group relative aspect-square rounded-xl overflow-hidden bg-[var(--bg-tertiary)] card-glow focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--accent)]",children:[(0,b.jsx)("img",{src:a.blobUrl,alt:`Progress photo from ${i(a.takenAt)}`,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:(0,b.jsxs)("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:[(0,b.jsx)("p",{className:"text-white font-medium text-sm",children:i(a.takenAt)}),a.weight&&(0,b.jsxs)("p",{className:"text-white/70 text-xs mt-0.5",children:[a.weight," kg"]})]})}),(0,b.jsx)("div",{className:"absolute top-3 left-3",children:(0,b.jsx)("span",{className:"px-2.5 py-1 rounded-md bg-black/60 backdrop-blur text-white text-xs font-medium",children:i(a.takenAt)})})]},a.id))}),e&&(0,b.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 animate-fade-in",onClick:()=>f(null),children:[(0,b.jsx)("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm"}),(0,b.jsxs)("div",{className:"relative w-full max-w-4xl max-h-[90vh] flex flex-col animate-scale-in",onClick:a=>a.stopPropagation(),children:[(0,b.jsx)("button",{onClick:()=>f(null),className:"absolute -top-12 right-0 p-2 rounded-lg text-white/60 hover:text-white hover:bg-white/10 transition-colors z-10",children:(0,b.jsx)(k,{className:"w-6 h-6"})}),(0,b.jsx)("div",{className:"relative flex-1 min-h-0 rounded-t-2xl overflow-hidden bg-[var(--bg-secondary)]",children:(0,b.jsx)("img",{src:e.blobUrl,alt:"Progress photo",className:"w-full h-full object-contain"})}),(0,b.jsxs)("div",{className:"bg-[var(--bg-card)] rounded-b-2xl border-t border-[var(--border-subtle)]",children:[(0,b.jsxs)("div",{className:"p-6 grid grid-cols-2 sm:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-[var(--text-muted)] uppercase tracking-wider mb-1",children:"Date Taken"}),(0,b.jsx)("p",{className:"font-medium text-[var(--text-primary)]",children:i(e.takenAt)})]}),e.weight&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-[var(--text-muted)] uppercase tracking-wider mb-1",children:"Weight"}),(0,b.jsxs)("p",{className:"font-medium text-[var(--text-primary)]",children:[e.weight," kg"]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-[var(--text-muted)] uppercase tracking-wider mb-1",children:"Uploaded"}),(0,b.jsx)("p",{className:"font-medium text-[var(--text-primary)]",children:i(e.uploadedAt)})]}),e.notes&&(0,b.jsxs)("div",{className:"col-span-2 sm:col-span-1",children:[(0,b.jsx)("p",{className:"text-xs text-[var(--text-muted)] uppercase tracking-wider mb-1",children:"Notes"}),(0,b.jsx)("p",{className:"text-[var(--text-secondary)] text-sm line-clamp-2",children:e.notes})]})]}),(0,b.jsxs)("div",{className:"px-6 pb-6 flex gap-3",children:[(0,b.jsxs)("button",{onClick:()=>window.open(e.blobUrl,"_blank"),className:"btn btn-secondary flex-1",children:[(0,b.jsx)(l,{className:"w-4 h-4"}),"Open Original"]}),(0,b.jsx)("button",{onClick:()=>j(e.id),disabled:g,className:"btn btn-danger flex-1",children:g?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"spinner spinner-sm"}),"Deleting..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m,{className:"w-4 h-4"}),"Delete"]})})]})]})]})]})]})}function k({className:a}){return(0,b.jsx)("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}function l({className:a}){return(0,b.jsx)("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})}function m({className:a}){return(0,b.jsx)("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}var n=a.i(96465);function o(){let[a,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0),[k,l]=(0,c.useState)(!1);(0,c.useEffect)(()=>{m()},[]);let m=async()=>{try{i(!0);let a=await e.api.getPhotos();g(a)}catch(a){console.error("Failed to load photos:",a)}finally{i(!1)}};return(0,b.jsx)(n.default,{children:(0,b.jsxs)("div",{className:"min-h-screen",children:[(0,b.jsx)(d.default,{}),(0,b.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-8 animate-fade-in-up",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold tracking-tight text-[var(--text-primary)]",children:"Progress Photos"}),(0,b.jsx)("p",{className:"text-[var(--text-secondary)] mt-1",children:"Document your fitness transformation"})]}),(0,b.jsx)("button",{onClick:()=>l(!k),className:`btn ${k?"btn-secondary":"btn-primary"}`,children:k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(q,{className:"w-4 h-4"}),"Cancel"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(p,{className:"w-4 h-4"}),"Upload Photo"]})})]}),k&&(0,b.jsx)("div",{className:"mb-10 animate-fade-in-up",children:(0,b.jsx)(f,{onPhotoUploaded:()=>{l(!1),m()}})}),(0,b.jsxs)("section",{children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"w-10 h-10 rounded-xl bg-[var(--accent-muted)] flex items-center justify-center",children:(0,b.jsx)(r,{className:"w-5 h-5 text-[var(--accent)]"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-[var(--text-primary)]",children:"Your Photos"}),(0,b.jsxs)("p",{className:"text-sm text-[var(--text-muted)]",children:[a.length," ",1===a.length?"photo":"photos"," in your collection"]})]})]}),h?(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Array(8)].map((a,c)=>(0,b.jsx)("div",{className:"aspect-square skeleton rounded-xl"},c))}):0===a.length?(0,b.jsxs)("div",{className:"card p-12 text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-[var(--bg-tertiary)] flex items-center justify-center mx-auto mb-4",children:(0,b.jsx)(p,{className:"w-8 h-8 text-[var(--text-muted)]"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-[var(--text-primary)] mb-2",children:"No progress photos yet"}),(0,b.jsx)("p",{className:"text-[var(--text-secondary)] mb-6 max-w-sm mx-auto",children:"Start documenting your fitness journey by uploading your first progress photo"}),(0,b.jsxs)("button",{onClick:()=>l(!0),className:"btn btn-primary",children:[(0,b.jsx)(p,{className:"w-4 h-4"}),"Upload First Photo"]})]}):(0,b.jsx)(j,{photos:a,onPhotoDeleted:()=>{m()}})]})]})]})})}function p({className:a}){return(0,b.jsxs)("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}function q({className:a}){return(0,b.jsx)("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}function r({className:a}){return(0,b.jsx)("svg",{className:a,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}a.s(["default",()=>o],7783)}];

//# sourceMappingURL=Desktop_uni_COM682_frontend_fittrack-frontend_src_app_photos_page_tsx_85a512d5._.js.map